#summary The design of core.data
#labels Phase-Design

= Introduction =

Core.data contains the data model of the tracking application. All tracked data are stored here an can be retrieved, changed, saved to SD-card and loaded from SD-card.

= Details =

First of all read the wiki article [Data Data].

== Data model ==

The data model is a like a tree:
  * !DataStorage contains:
   * !DataTrack contains:
    * !DataNode (POIs) contains:
     * tags
     * !DataMedia
    * !DataPointsList (ways and areas) contains:
     * !DataMedia
     * !DataNode contains:
      * tags
      * !DataMedia
     * tags
    * !DataMedia

== Data operations ==

There are 4 operations that can be done on a datum:
  * create: create a new datum and append to parent object
  * delete: delete the datum (operation is done on the parent object)
  * update: update data of the datum
  * query: if the parent object has a list of data, query (the parent) to find the specific datum.

== !DataStorage ==
!DataStorage is the class that has all other data in it. It is therefore like a root-object. Since all other parts of the application should only work on one "database" of the tracking data this class is modeled as Singleton. There is at most one instance of !DataStorage.

There is a special reference to a loaded track called currentWay. The current way is the way that is currently edited. There is at most one current way.

== !DataMediaHolder ==

As seen in the data model tree above a !DataTrack, !DataNode and !DataPointsList can have media attached. Therefore !DataMediaHolder is a super class of those 3 classes and implements functionality to handle media.

== !DataMapObject ==

Also as seen in the data model tree above a !DataNode and !DataPointsList can have tags. See [http://wiki.openstreetmap.org/wiki/Tags OpenStreetMap-tags]. !DataMapObject provides the functionality to handle tags. All !DataMapObject are also !DataMediaHolder so that !DataMediaHolder is the super class of !DataMapObject.